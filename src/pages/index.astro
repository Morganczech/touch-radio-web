---
import stations from "../data/stations.normalized.json";
import BaseLayout from "../layouts/BaseLayout.astro";
import StationList from "../components/StationList.astro";
---

<BaseLayout>
	<header>
		<h1>Touch Radio</h1>
	</header>
	<main>
		<section>
			<h2>Available Stations</h2>
			<StationList stations={stations} />
		</section>
	</main>
	<script>
		// Client-side state management for station selection
		document.addEventListener("DOMContentLoaded", () => {
			const selectedIds = new Set();
			const checkboxes = document.querySelectorAll(
				'input[type="checkbox"][data-id]',
			);

			checkboxes.forEach((checkbox) => {
				checkbox.addEventListener("change", (event) => {
					const target = event.target as HTMLInputElement;
					const id = target.dataset.id;

					if (id) {
						if (target.checked) {
							selectedIds.add(id);
						} else {
							selectedIds.delete(id);
						}
						// Console log for verification as per "no UI changes" except checkbox requirement
					}
				});
			});
		});
	</script>
</BaseLayout>
